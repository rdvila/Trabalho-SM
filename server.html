<!doctype html>
<html>
	<head>
		<style type="text/css">
			html, body {
				margin: 0px;
			}
			
			canvas {
				border:2px;
				display: block;
				margin-top: 2px;
				margin-left: 2px;
				border-style: solid;
				border-color: #000000;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas"></canvas>
		<script>
			var points = [];
			
			function setSize(canvas) {
				canvas.width = window.innerWidth - 8,
				canvas.height = window.innerHeight - 8;
			}

			function writeMessage(context, message) {
				context.font = '18pt Calibri';
				context.fillStyle = 'black';
				context.fillText(message, 10, 25);
			}

			function draw(canvas, evt) {
				var context = canvas.getContext('2d');
				context.clearRect(0, 0, canvas.width, canvas.height);

				var currentPoint = getMousePos(canvas, evt);
				var message = 'Mouse position: ' + currentPoint.x + ',' + currentPoint.y;
				writeMessage(context, message);

				var length = points.length;
				if (length === 0) {
					return;
				}

				context.beginPath();
				points.forEach(function(point) {
					context.lineTo(point.x, point.y);
				});

				context.lineTo(currentPoint.x, currentPoint.y);
				context.stroke();		
			}


			function getMousePos(canvas, evt) {
				var rect = canvas.getBoundingClientRect();
				return {
					x: evt.clientX - rect.left,
					y: evt.clientY - rect.top
				};
			}

			window.onload = function() {
				var canvas = document.getElementById("myCanvas");
				context = canvas.getContext("2d");
				setSize(canvas);

				window.canvas = canvas;
				window.context = context;

				canvas.addEventListener('click', function(evt) {
					var mousePos = getMousePos(canvas, evt);
					points.push(mousePos);
				}, false);

				canvas.addEventListener('mousemove', function(evt) {
					draw(canvas, evt);
				}, false);
			}

			window.onresize = function() {
				setSize(window.canvas);
			};
		</script>
	</body>
</html>